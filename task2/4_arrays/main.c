#include "stdio.h"
#include "stdlib.h"

int main() {
    int N;

    // Запрашиваем у пользователя размер матрицы
    printf("Enter N: ");
    scanf("%d", &N);

    // Определяем квадратную матрицу размером N x N
    int matrix[N][N];    

    int Ibeg = 0, Ifin = 0; // Границы строк сверху и снизу
    int Jbeg = 0, Jfin = 0; // Границы столбцов слева и справа

    int k = 1;  // Текущее значение для заполнения ячейки матрицы
    int i = 0;           
    int j = 0;           

    // Основной цикл: заполняем матрицу значениями от 1 до N*N
    while (k <= N * N) {
        matrix[i][j] = k; // Записываем текущее значение в ячейку матрицы

        // Двигаемся вправо, пока не дойдём до правой границы
        if (i == Ibeg && j < N - Jfin - 1) {
            ++j;
        }
        // Двигаемся вниз, пока не дойдём до нижней границы
        else if (j == N - Jfin - 1 && i < N - Ifin - 1) {
            ++i;
        }
        // Двигаемся влево, пока не дойдём до левой границы
        else if (i == N - Ifin - 1 && j > Jbeg) {
            --j;
        }
        // Двигаемся вверх, пока не дойдём до верхней границы
        else {
            --i;
        }

        // После прохождения одного слоя спирали обновляем границы
        if ((i == Ibeg + 1) && (j == Jbeg) && (Jbeg != N - Jfin - 1)) {
            ++Ibeg;  // Сдвигаем верхнюю границу вниз
            ++Ifin;  // Сдвигаем нижнюю границу вверх
            ++Jbeg;  // Сдвигаем левую границу вправо
            ++Jfin;  // Сдвигаем правую границу влево
        }

        ++k;
    }

    // Вывод матрицы
    for (int i = 0; i < N; ++i) {
        for (int j = 0; j < N; ++j)
            printf("%d ", matrix[i][j]);
        printf("\n"); 
    }

    return 0;
}
